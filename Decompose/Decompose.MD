# Задание

Предложите 2 способа функциональной декомпозиции системы.
В результате должно получиться:
1. Модели предметной области и соответствующую функциональную декомпозицию
2. Сценарии изменений с примерами (и возможно оценкой вероятности)
3. Оценка стоимости изменений для каждого решения (модифицируемость)
4. Сравнительный анализ и вывод

# Решение
## Способ 1
Функциональная декомпозиция на компоненты
![GoGreen-Функц.декомпозиция№1.jpg](GoGreen-%D0%A4%D1%83%D0%BD%D0%BA%D1%86.%D0%B4%D0%B5%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%E2%84%961.jpg)
Модель предметной области
![GoGreen-Модель предметной области.jpg](GoGreen-%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C%20%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE%D0%B9%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B8.jpg)

## Способ 2
Функциональная декомпозиция на функциональные блоки
![GoGreen-Декомпозиция№2.jpg](GoGreen-%D0%94%D0%B5%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%E2%84%962.jpg)

Модель предметной области\
![GoGreen-Предметная обл.№2.jpg](GoGreen-%D0%9F%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%B0%D1%8F%20%D0%BE%D0%B1%D0%BB.%E2%84%962.jpg)
# Сценарии модифицируемости для оценки вариантов декомпозиции системы

Сценарий №1:
Требуется внести изменения в бизнес-логику. Если раньше пользователю при оформлении заявки 
отправлялся результат предварительной оценки стоимости устройства. То теперь необходимо 
проверить устройство полностью в отделе тестирования, удостовериться что оно действительно работает, и только потом произвести оценку.

Сценарий №2:
Требуется внести изменения в модель данных. Необходимо в платёжку добавить информацию об
устройстве.

# Способ 1

Стоимость внесения изменений по сценарию №1:
* Изменение логики старта бизнес-процесса
* Изменение порядка вызова микросервисов в бизнес-процессе (диаграмма + код)

Стоимость внесения изменений по сценарию №2:
* Изменение логической модели, изменение физической модели данных, добавление аттрибута
* Миграция старых данных на новую схему
* Изменение в коде, учитывающие что при создании платёжки нужно передавать Id устройства

# Способ 2

Стоимость внесения изменений по сценарию №1:
* Изменение порядка следования функциональных блоков
* Изменения кода в цепочке сервисов, отражающие новый порядок вызова функций

Стоимость внесения изменений по сценарию №2:
* Изменение логической модели, изменение физической модели данных, добавление аттрибута
* Миграция старых данных на новую схему
* Изменения в коде нескольких сервисов, добавление аттрибутов, параметров функций и эндпоинтов

# Вывод
В первом способе функциональной декомпозиции вырисовывается архитектура с оркестратором. Во втором способе - архитектура с хореографией.\
Если оценивать по критерию модифицируемость, то оба способа подвержены сильным изменениям в предложенных сценариях. Скорость доставки изменений в прод будет выше у первого способа. 
Потому что это решение хорошо структурированна, есть диаграмма бизнес-процесса, тестирование будет наглядным и предсказуемым. В то время как для функционального разбиения, где будет хореография, разработчику нужно потратить больше времени чтобы найти все места в сервисах которые аффектятся данными изменениями.
Итог - выбираем способ №1 "Функциональная декомпозиция по компонентам"
